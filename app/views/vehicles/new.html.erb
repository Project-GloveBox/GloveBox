<ons-navigator id="myNavigator">
  <ons-page>
  <ons-toolbar>
    <div class="left">
        <ons-icon icon="fa-car" style="padding: 5px"></ons-icon>
    </div>
    <div class="toolbar__center">
        <%= "#{current_user.first_name}'s GloveBox" %>
    </div>
    <div class="right">
      <ons-toolbar-button>
        <ons-icon icon="md-menu"></ons-icon>
      </ons-toolbar-button>
    </div>
  </ons-toolbar>

    <ons-tabbar position="auto">
      <ons-tab page="index.html" active icon="ion-home" label="Home"></ons-tab>
      <ons-tab icon="md-plus" label="Add Vehicle" page="new.html"></ons-tab>
      <ons-tab icon="ion-ios-cog" label="Maintenance" page="/maintenance_logs/new.html"></ons-tab>
    </ons-tabbar>
  </ons-page>
</ons-navigator>

<template id="index.html">
  <ons-page>
    <p class="intro" style="text-align: center">
      Welcome to GloveBox!<br>
    </p>
    <p class="intro" style="text-align: center">
      <em>The place where you can maintain your maintenance. </em><br><br>
    </p>
    
<%@vehicles.each do |vehicle| %>
    <ons-card>
    <img src="https://monaca.io/img/logos/download_image_onsenui_01.png" alt="Onsen UI" style="width: 100%">
    <div class="title">
      <%= vehicle.name %>
    </div>
    <div class="content">
      <ons-list>
        <ons-list-header></ons-list-header>
        <ons-row>
          <ons-col width="25%"><%= vehicle.year %></ons-col>
          <ons-col width="25%"><%= vehicle.make %></ons-col>
          <ons-col width="25%"><%= vehicle.model %></ons-col>
          <ons-col width="25%"><%= vehicle.color %></ons-col>
        </ons-row>
      </ons-list>
      <ons-list>
      <br>
        <ons-row>
          <ons-col width="30%"><%= vehicle.license_plate %></ons-col>
          <ons-col width="45%"><%= vehicle.vin %></ons-col>
          <ons-col width="25%"><i class="far fa-question-circle" width="25%" 
            onclick="ons.notification.toast('The VIN (vehicle identification number) can often be found on the lower-left corner of the dashboard, in front of the steering wheel. You can read the number by looking through the windshield.', { timeout: 3000})"></i></ons-col>
        </ons-row>
      </ons-list>
    </div>
  </ons-card>
<%end%>
    <div style="text-align: center">
      <br>
      <ons-button class="button button--material" onclick="myNavigator.pushPage('new.html')">
        Add a Vehcile
      </ons-button>
    </div>
  </ons-page>
</template>



<template id="new.html">
  <ons-page>
  <br>
  <%= form_for(@vehicle, remote: true) do |f| %>
    <ons-list modifier="inset">
      <ons-list-header>Vehcile Information</ons-list-header>
      <ons-list-item modifier="longdivider"><%= f.text_field :name, autocomplete: "name", class: 'text-input', placeholder: 'Vehicle Nickname' %></ons-list-item>
      <ons-list-item modifier="longdivider"><%= f.text_field :color, autocomplete: "color", class: 'text-input', placeholder: 'Color' %></ons-list-item>
    </ons-list>
    <br>
    <ons-list modifier="inset">
      <ons-list-item modifier="longdivider"><%= f.text_field :make, autocomplete: "make", class: 'text-input', placeholder: 'Make' %></ons-list-item>
      <ons-list-item modifier="longdivider"><%= f.text_field :model, autocomplete: "model", class: 'text-input', placeholder: 'Model' %></ons-list-item>
      <ons-list-item modifier="longdivider"><%= f.text_field :year, autocomplete: "year", class: 'text-input', placeholder: 'Year' %></ons-list-item>
    </ons-list>
    <br>
    <ons-list modifier="inset">
      <ons-list-item modifier="longdivider"><%= f.text_field :vin, autocomplete: "vin", class: 'text-input', placeholder: 'VIN' %></ons-list-item>
      <ons-list-item modifier="longdivider"><%= f.text_field :license_plate, autocomplete: "license_plate", class: 'text-input', placeholder: 'License Plate #' %></ons-list-item>
      <ons-list-item modifier="longdivider"><%= f.text_field :inspection, autocomplete: "inspection", class: 'text-input', placeholder: 'Date of last Inspection' %></ons-list-item>
    </ons-list>
             <%=f.submit id:"form-submit" %>
    <% end %>
 

    <div style="text-align: center">
      <br>
      <ons-button :preview_button class="button button--material" onclick="myNavigator.pushPage('show.html')">
        Preview
      </ons-button>
    </div>
  </ons-page>
</template>

<template id="show.html">
  <ons-page id="show">
    <ons-toolbar>
      <div class="left">
        <ons-back-button>Back</ons-back-button>
      </div>
    </ons-toolbar>

    <ons-card>
    <img src="https://monaca.io/img/logos/download_image_onsenui_01.png" alt="Onsen UI" style="width: 100%">
    <div class="title">
      <%= @vehicle.name %>
    </div>
    <div class="content">
      <ons-list>
        <ons-list-header></ons-list-header>
        <ons-list-item><%= @vehicle.name %></ons-list-item>
        <ons-list-item><%= @vehicle.make %></ons-list-item>
        <ons-list-item><%= @vehicle.model %></ons-list-item>
        <ons-list-item><%= @vehicle.year %></ons-list-item>
        <ons-list-item><%= @vehicle.color %></ons-list-item>
        <ons-list-item><%= @vehicle.license_plate %></ons-list-item>
        <ons-list-item><%= @vehicle.vin %></ons-list-item>    
      </ons-list>
    </div>
  </ons-card>

    <div style="text-align: center">
      <br>
      <ons-button class="button button--material" id='submit_button' onclick="clicksub()">
        SUBMIT
      </ons-button>
    </div>

  </ons-page>
</template>

<template id="/maintenance_logs/new.html">
  <ons-page>
    <h2>this page should link to maintenance_logs</h2>
  </ons-page>
</template>
<style>
 #form-submit{
     display: none;
 }
</style>
<script>
function clicksub(){
var sub = document.getElementById("form-submit")
sub.click();
}
document.addEventListener('init', function(event) {
  var page = event.target;

  if (page.id === 'page1') {
    page.querySelector('#push-button').onclick = function() {
      document.querySelector('#myNavigator').pushPage('page2.html', {data: {title: 'Page 2'}});
    };
  } else if (page.id === 'page2') {
    page.querySelector('ons-toolbar .center').innerHTML = page.data.title;
  }
});

var submit = function() {
  var username = document.getElementById('username').value;
  var password = document.getElementById('password').value;

  if (username === 'bob' && password === 'secret') {
    ons.notification.alert('Congratulations!');
  } else {
    ons.notification.alert('Incorrect username or password.');
  }
};

function submit(){
    var sql = "INSERT INTO vehicles (name, year, make, model, vin, license_plate, tire_psi, inspection, user_id, color)";
}
    
function hideprev(){
   var prev_button = document.getElementById("prev_button").style.display = "none"
}

function showprev(){
   var prev_button = document.getElementById("prev_button").style.display = "block"
}

function hidenext(){
    var next_button = document.getElementById("next_button").style.display = "none"
}

function showtab(tab){
    var tab = document.getElementById(tab).style.display = "block"
}

function hidetab(tab){
    var tab = document.getElementById(tab).style.display = "none"
}

function show_submit(){
    var submit = document.getElementById("Submit").style.display = "block"
}


</script>